{% extends "_layouts/app.html" %}

{% block head %}
<title>Detalle del Pedido</title>
{% endblock %}

{% block content %}
<div class="flex flex-col items-center justify-center px-4 py-12 sm:px-6 lg:px-8">
  <div class="w-full max-w-4xl p-8 bg-white rounded-lg shadow-lg">
    <h1 class="mb-6 text-3xl font-extrabold text-center text-indigo-700">Detalle del Pedido</h1>

    <div class="space-y-4">
      <p><strong>ID del Pedido:</strong> {{ pedido.id }}</p>
      <p><strong>Estado:</strong> {{ pedido.estado }}</p>
      <p><strong>Fecha:</strong> {{ pedido.fecha.strftime('%d/%m/%Y') }}</p>
      <p><strong>Laboratorio:</strong> {{ laboratorio.nombre if laboratorio else 'No asignado' }}</p>
      <p><strong>Observaciones:</strong> {{ pedido.observaciones or 'Sin observaciones' }}</p>
    </div>

    <h2 class="mt-8 text-2xl font-semibold text-indigo-700 border-t border-indigo-200">Estudios Asociados</h2>
    <div class="mt-4">
      {% if estudios %}
        <table class="w-full border-collapse border">
          <thead class="bg-indigo-500 text-white">
            <tr>
              <th class="px-4 py-2">ID Estudio</th>
              <th class="px-4 py-2">Tipo de Estudio</th>
              <th class="px-4 py-2">Fecha de Solicitud</th>
              <th class="px-4 py-2">SÃ­ntomas</th>
            </tr>
          </thead>
          <tbody>
            {% for estudio in estudios %}
            <tr class="text-gray-700 even:bg-gray-100">
              <td class="px-4 py-2">{{ estudio.id }}</td>
              <td class="px-4 py-2">{{ estudio.tipo_estudio }}</td>
              <td class="px-4 py-2">{{ estudio.fecha_solicitud.strftime('%d/%m/%Y') }}</td>
              <td class="px-4 py-2">{{ estudio.sintomas or 'No especificados' }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-gray-600">No hay estudios asociados a este pedido.</p>
      {% endif %}
    </div>

    <div class="mt-8 text-center">
      <a href="{{ url_for('transportista.listar_pedidos_pendientes') }}" 
         class="px-4 py-2 text-white bg-indigo-600 rounded-lg shadow-md hover:bg-indigo-700">
        Volver a la lista de pedidos
      </a>
    </div>
  </div>
</div>
{% endblock %}
